<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Dice Library</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style type="text/css">
        body {
            margin: 0 auto;
            max-width: 40em;
            width: 88%;
        }
    </style>
</head>

<body>

    <h1>Dice Library</h1>

    <p>All of the magic here happens in the console.</p>


    <script>
        let roll = (function () {

            /**
             * Create a die
             * @param  {Number} sides The number of sides on the die
             * @return {Array}        The die
             */
            function createDie(sides) {
                if (sides % 2 !== 0) {
                    throw new Error("Please enter an even number of sides.")
                }
                let die = [];
                for (let i = 1; i <= sides; i++) {
                    die.push(i);
                }
                return die;
            }

            /**
             * Roll a die
             * @param  {Array} die The die to roll
             * @return {Number}    The result of the roll
             */
            function rollDie(sides) {
                let dieArray = createDie(sides)
                let result = shuffle(dieArray);
                return result[0];
            }


            /**
             * Randomly shuffle an array
             * https://stackoverflow.com/a/2450976/1293256
             * @param  {Array} array The array to shuffle
             * @return {Array}       The shuffled array
             */
            function shuffle(array) {

                let currentIndex = array.length;
                let temporaryValue, randomIndex;

                // While there remain elements to shuffle...
                while (0 !== currentIndex) {
                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                }

                return array;

            }

            return { rollDie }

        })()

        let result = roll.rollDie(8);
        console.log('result', result);
    </script>
</body>

</html>